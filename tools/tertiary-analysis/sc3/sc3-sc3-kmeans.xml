<tool id="sc3-sc3-kmeans" name="SC3 kmeans" version="@TOOL_VERSION@+galaxy0">
    <description>Perform k-means clustering on single cell datasets</description>
    <macros>
        <import>sc3-macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <command detect_errors="exit_code"><![CDATA[
ln -rs '${sc3_transformed}' && 
        sc3-sc3-kmeans.R -i sc3_transformed.rdata -k sc3-estimated-k.txt -o '${sc3_kmeans}' 
   
    ]]></command>
    <inputs>
        <param type="data" name="sc3_transformed" format="rdata" label="SC3 object with transformed distances"/>
        <param type="data" name="sc3-estimated-k" format="text" label="K selected or estimated for k-means clustering"/>
    </inputs>
    <outputs>
        <data name="sc3_kmeans" format="rdata" label="${tool.name} on ${on_string}: SC3 object to store the k-means clusters"/>
    </outputs>
    <tests>
        <test>
            <param name="sc3_transformed" value="sc3_transformed"/>
            <param name="sc3-estimated-k" value="K_size"/>
            <output name="sc3_kmeans" file="sc3_kmeans.rdata"/>
        </test>
    </tests>
    <help><![CDATA[

============================================================
This function performs kmeans clustering of the matrices contained in the transformations item of the sc3 slot of the metadata(object). 
============================================================
It then creates and populates the following items of the sc3 slot:

kmeans - contains a list of kmeans clusterings.

@HELP@

    ]]></help>
    <expand macro="citations" />
</tool>