{"tests": [{"data": {"inputs": {"cds_object": {"src": "hda", "id": "2891970512fa2d5a"}, "marker_file_path": {"src": "hda", "id": "5729865256bc2525"}}, "job": {"inputs": {"cds_object": {"src": "hda", "id": "2891970512fa2d5a", "uuid": "feb8afc1-8561-40df-bc0c-d4b2ac85c15e"}, "marker_file_path": {"src": "hda", "id": "5729865256bc2525", "uuid": "d8ddee25-e75c-4dbe-838e-6ff7f0fb63ba"}}, "update_time": "2020-04-02T15:52:58.136364", "stdout": "[1] \"plotting path /private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_4.dat\"\nnull device \n          1 \n", "outputs": {"marker_output_path": {"src": "hda", "id": "54f2a3a23292eb07", "uuid": "d23e9dfc-b6a0-407b-ba24-573036b73b4e"}, "plot_output_path": {"src": "hda", "id": "8155e4b4bf1581ff", "uuid": "5ea7b6f8-d9a7-416a-ad9e-b4f1bdc296b7"}}, "tool_id": "garnett_check_markers", "command_line": "garnett_check_markers.R --cds-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_1.dat' --marker-file-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_2.dat' --database 'org.Hs.eg.db' --cds-gene-id-type 'ENSEMBL' --marker-file-gene-id-type 'ENSEMBL' --marker-output-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_3.dat' --plot-output-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_4.dat' --propogate-markers 'true' --classifier-gene-id-type 'ENSEMBL'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T15:49:54.481519", "params": {"cds_gene_id_type": "\"ENSEMBL\"", "database": "\"org.Hs.eg.db\"", "dbkey": "\"hg17\"", "marker_file_gene_id_type": "\"ENSEMBL\"", "propogate_markers": "\"true\"", "classifier_gene_id_type": "\"ENSEMBL\"", "chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\""}, "stderr": "There are 10 cell type definitions\n", "job_metrics": [], "model_class": "Job", "external_id": "15577", "id": "54f2a3a23292eb07", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_garnett_check_markers.test_tool_000000", "has_data": true}, {"data": {"inputs": {"cds_object": {"src": "hda", "id": "7b55dbb89df8f4e5"}, "classifier_object": {"src": "hda", "id": "fa6d20d0fb68383f"}}, "job": {"inputs": {"cds_object": {"src": "hda", "id": "7b55dbb89df8f4e5", "uuid": "af717113-f281-4fba-8953-7ab717e90d46"}, "classifier_object": {"src": "hda", "id": "fa6d20d0fb68383f", "uuid": "ce396530-623e-4e59-96ad-0db6ceb88fa7"}}, "update_time": "2020-04-02T15:53:42.785760", "stdout": "<simpleError: 'coef.cv.glmnet' is not an exported object from 'namespace:glmnet'>\n", "outputs": {"cds_output_obj": {"src": "hda", "id": "683bc220e21425bb", "uuid": "5d79ba65-d9ab-49df-914d-4708065df316"}}, "tool_id": "garnett_classify_cells", "command_line": "garnett_classify_cells.R --cds-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_5.dat' --classifier-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_6.dat' --database 'org.Hs.eg.db' --cds-gene-id-type 'ENSEMBL' --cluster-extend 'true' --rank-prob-ratio '1.5' --cds-output-obj '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_7.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T15:53:29.512613", "params": {"cds_gene_id_type": "\"ENSEMBL\"", "database": "\"org.Hs.eg.db\"", "dbkey": "\"hg17\"", "rank_prob_ratio": "\"1.5\"", "cluster_extend": "\"true\"", "chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\""}, "stderr": "", "job_metrics": [], "model_class": "Job", "external_id": "16252", "id": "fa6d20d0fb68383f", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_garnett_classify_cells.test_tool_000000", "has_data": true}, {"data": {"inputs": {"input_object": {"src": "hda", "id": "a90a30fafe298e1e"}}, "job": {"inputs": {"input_object": {"src": "hda", "id": "a90a30fafe298e1e", "uuid": "807a2ffe-eff2-41f2-8b89-534a213a80e3"}}, "update_time": "2020-04-02T15:53:59.625054", "stdout": "no index column provided; use row names\n", "outputs": {"output_file_path": {"src": "hda", "id": "b842d972534ccb3e", "uuid": "fb166a1e-555b-4ce9-a76d-e08b4aff2b3b"}}, "tool_id": "garnett_get_std_output", "command_line": "garnett_get_std_output.R --input-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_8.dat' --output-file-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_9.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T15:53:48.208389", "params": {"chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\"", "dbkey": "\"hg17\""}, "stderr": "", "job_metrics": [], "model_class": "Job", "external_id": "16881", "id": "a90a30fafe298e1e", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_garnett_get_std_output.test_tool_000000", "has_data": true}, {"data": {"inputs": {"cds_object": {"src": "hda", "id": "5449172d6ff5669b"}, "marker_file_path": {"src": "hda", "id": "9ce08b2254e4d5ed"}}, "job": {"inputs": {"cds_object": {"src": "hda", "id": "5449172d6ff5669b", "uuid": "b5af51af-1203-4a2f-81b0-ea74c168f9c7"}, "marker_file_path": {"src": "hda", "id": "9ce08b2254e4d5ed", "uuid": "7e563d60-4539-453d-90f8-81818a8dae2a"}}, "update_time": "2020-04-02T15:55:42.167676", "stdout": "training_sample\n      1       2       3       4       5       7 Unknown \n      2       2       2       2      13      19      77 \n", "outputs": {"output_classifier_path": {"src": "hda", "id": "80b8022ff3f677b7", "uuid": "851be5d7-bdad-422c-96c0-533de2683dd1"}}, "tool_id": "garnett_train_classifier", "command_line": "garnett_train_classifier.R --cds-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_10.dat' --marker-file-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_11.dat' --database 'org.Hs.eg.db' --cds-gene-id-type 'ENSEMBL' --marker-file-gene-id-type 'ENSEMBL' --num-unknown '500' --min-observations '8' --max-training-samples '500' --propogate-markers 'true' --cores '1' --classifier-gene-id-type 'ENSEMBL' --output-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_12.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T15:54:10.415032", "params": {"num_unknown": "\"500\"", "cds_gene_id_type": "\"ENSEMBL\"", "database": "\"org.Hs.eg.db\"", "dbkey": "\"hg17\"", "marker_file_gene_id_type": "\"ENSEMBL\"", "propogate_markers": "\"true\"", "cores": "\"1\"", "classifier_gene_id_type": "\"ENSEMBL\"", "min_observations": "\"8\"", "max_training_samples": "\"500\"", "chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\""}, "stderr": "There are 10 cell type definitions\nWarning in (function (A, nv = 5, nu = nv, maxit = 1000, work = nv + 7, reorth = TRUE,  :\n  You're computing too large a percentage of total singular values, use a standard svd instead.\nThe following cell types do not have enough training cells and will be dropped:  1 2 3 4\nModel training finished.\n", "job_metrics": [], "model_class": "Job", "external_id": "17545", "id": "9ce08b2254e4d5ed", "user_email": "test@bx.psu.edu"}, "output_problems": ["History item  different than expected, difference (using diff):\n( /Users/a_solovyev/dev/container-galaxy-sc-tertiary/tools/tertiary-analysis/garnett/test_dir/trained_classifier.rds v. /var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpp8lzbgtrained_classifier.rds )\nBinary data detected, not displaying diff"], "problem_type": "functional.test_toolbox.JobOutputsError", "problem_log": "Traceback (most recent call last):\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py\", line 331, in run\n    testMethod()\n  File \"/Users/a_solovyev/galaxy_18.01/test/functional/test_toolbox.py\", line 316, in test_tool\n    self.do_it(td)\n  File \"/Users/a_solovyev/galaxy_18.01/test/functional/test_toolbox.py\", line 82, in do_it\n    raise e\nJobOutputsError: History item  different than expected, difference (using diff):\n( /Users/a_solovyev/dev/container-galaxy-sc-tertiary/tools/tertiary-analysis/garnett/test_dir/trained_classifier.rds v. /var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpp8lzbgtrained_classifier.rds )\nBinary data detected, not displaying diff\n", "status": "failure"}, "id": "functional.test_toolbox.TestForTool_garnett_train_classifier.test_tool_000000", "has_data": true}, {"data": {"inputs": {"marker_list": {"src": "hda", "id": "1ae74d26531588b0"}, "input_marker_file": {"src": "hda", "id": "b54fb481e575bccc"}}, "job": {"inputs": {"marker_list": {"src": "hda", "id": "1ae74d26531588b0", "uuid": "1a9736ce-289b-42de-98f9-53ac90abb7ee"}, "input_marker_file": {"src": "hda", "id": "b54fb481e575bccc", "uuid": "e42d7822-7af4-4879-a367-9e77c9864a2f"}}, "update_time": "2020-04-02T15:56:09.747058", "stdout": "[1] TRUE\n", "outputs": {"garnett_marker_file": {"src": "hda", "id": "440a6c2b5d9efe20", "uuid": "0657bd86-ac95-4965-8a20-f8e88f7555a2"}}, "tool_id": "garnett_transform_markers", "command_line": "transform_marker_file.R --input-marker-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_13.dat' --marker-list '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_14.dat' --pval-col 'pvals' --pval-threshold '0.05' --groups-col 'groups' --gene-names 'names' --garnett-marker-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_15.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T15:56:03.888954", "params": {"chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\"", "dbkey": "\"hg17\"", "pval_col": "\"pvals\"", "groups_col": "\"groups\"", "gene_names": "\"names\"", "pval_threshold": "\"0.05\""}, "stderr": "", "job_metrics": [], "model_class": "Job", "external_id": "18227", "id": "1ae74d26531588b0", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_garnett_transform_markers.test_tool_000000", "has_data": true}, {"data": {"inputs": {"marker_list_obj": {"src": "hda", "id": "ea0b941dfbe636f8"}, "marker_check_file": {"src": "hda", "id": "27ee89e2e3d631e0"}}, "job": {"inputs": {"marker_list_obj": {"src": "hda", "id": "ea0b941dfbe636f8", "uuid": "2a42004d-66c0-4e55-8095-92aa9980cc06"}, "marker_check_file": {"src": "hda", "id": "27ee89e2e3d631e0", "uuid": "a32455f4-b39e-498d-9ad8-d49a0a4bb828"}}, "update_time": "2020-04-02T15:56:24.634408", "stdout": "[1] TRUE\n", "outputs": {"updated_marker_file": {"src": "hda", "id": "61f03d5eef6f1538", "uuid": "555ff8fa-401e-474f-ad9e-3f1d53a1ad7e"}}, "tool_id": "update_marker_file", "command_line": "update_marker_file.R --marker-list-obj '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_16.dat' --marker-check-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_17.dat' --summary-col 'summary' --cell-type-col 'cell_type' --gene-id-col 'gene_id' --updated-marker-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpocsk4uk3/files/000/dataset_18.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T15:56:19.562257", "params": {"summary_col": "\"summary\"", "gene_id_col": "\"gene_id\"", "chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\"", "cell_type_col": "\"cell_type\"", "dbkey": "\"hg17\""}, "stderr": "", "job_metrics": [], "model_class": "Job", "external_id": "18893", "id": "27ee89e2e3d631e0", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_update_marker_file.test_tool_000000", "has_data": true}], "version": "0.1", "summary": {"num_tests": 6, "num_failures": 1, "num_errors": 0, "num_skips": 0}, "exit_code": 1}