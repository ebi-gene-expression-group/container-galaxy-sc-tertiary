<tool id="scater-normalize" name="Scater normalise" version="@TOOL_VERSION@+galaxy0">
    <description>Normalise from serialized scater R object</description>
    <macros>
        <import>scater_macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <command detect_errors="exit_code"><![CDATA[
    	ln -s '$R_scater_qc' R_scater_qc.rds;

        scater-normalize.R -i '$R_scater_qc' 
                          	#if $exprs_value:
        						 --exprs-values '$exprs_value'
        					#end if  
        					#if $return_log:
        						--return-log '$return_log'
        					#end if
        					#if $log_exprs_offset:
								--log-exprs-offset '$log_exprs_offset'
							#end if
							#if $centre_size_factors:
								--centre-size-factors '$centre_size_factors'
							#end if
							#if $return_norm_as_exprs:
								--return-norm-as-exprs '$return_norm_as_exprs'
							#end if 
        					-o '$R_scater_normalize'
    ]]></command>
    <inputs>
        <param type="data" name="R_scater_qc" format="rdata" />
        <param type="text" argument="--exprs-values" name="exprs_value" optional="True" value="counts" label="expression counts values from RDS object" help="Default: counts" />
        <param type="boolean" argument="--return-log" name="return_log" label="should normalized values be returned on the log scale" help="Default: TRUE"  />
        <param type="integer" argument="--log-exprs-offset" name="log_exprs_offset" optional="True" value="1" label="should size factors centred at unity be stored in the returned object" help="Default: 1" />
        <param type="boolean" argument="--centre-size-factors" name="centre_size_factors" label="centre size factors" help="Default: TRUE"/>
        <param type="boolean" argument="--return-norm-as-exprs" name="return_norm_as_exprs" label="return norm as exprs" help="Default: TRUE"/>
    </inputs>
    <outputs>
        <data name="R_scater_normalize" format="rdata" label=""/>
    </outputs>
    <tests>
        <test>
            <param name="R_scater_qc" value="R_scater_qc.rds" />
            <output name="R_scater_normalize" file="R_scater_normalize.rds" />
        </test>
    </tests>
    <help><![CDATA[
    ]]></help>
    <expand macro="citations" />
</tool>